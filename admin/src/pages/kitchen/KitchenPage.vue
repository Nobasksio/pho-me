<template>
    <q-page class="">
        <div class="row">
            <div class="col-10 q-pa-lg text-h4 row">
                <div class="col-4" :key="orderItem.orderId" v-for="orderItem in allCook">
                    <div class="order-card"
                         :class="getCookTimerColor(orderItem)">
                        <div class="row justify-between">
                            <div># {{orderItem.number}}</div>
                            <div>{{getCookTimerSeconds(orderItem)}}</div>
                        </div>
                        <div>
                            <div>
                                {{getKitchenStatusName(orderItem)}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-2">
                <div class=" q-pa-md text-h5 row justify-between">
                    <span>Всего:</span>
                    <span class="text-weight-bolder">
                    {{allActive.length}}
                    </span>
                </div>
                <div class=" q-pa-md text-h5 row justify-between">
                    <span> Во время:</span> <span class="text-weight-bolder">{{during}}</span>
                </div>
                <div class="q-pa-md text-h5 row justify-between">
                    <span>Опоздало:</span> <span class="text-weight-bolder">{{late}}</span>
                </div>
                <div>
                    <pie-chart :chartData="dataPie" :options="options"></pie-chart>
                </div>
            </div>
        </div>
    </q-page>
</template>

<script>
import { date } from 'quasar';
import PieChart from '../../components/ui/PieChart';

export default {
  name: 'KitchenPage',
  components: {
    PieChart,
  },
  data() {
    return {
      qDate: date,
      late: 0,
      during: 0,
      notFinish: 0,
      options: {},
      timeValue: -1,
      dateTimerStart: new Date(),
      timer: null,
      allOrders: {
        deliveryOrders: [],
      },
      mockOrders: {
        deliveryOrders: [
          {
            customer: {
              sex: 0,
              id: 'fe0360ed-cc5e-4137-b56b-00139d4902d0',
              externalId: null,
              name: 'Анна',
              surName: '',
              nick: '',
              comment: '',
              phone: '+79246224888',
              additionalPhones: [],
              addresses: [],
              cultureName: null,
              birthday: null,
              email: null,
              middleName: null,
              shouldReceivePromoActionsInfo: true,
              counteragentInfo: null,
            },
            orderId: '95e9a726-ffdc-452f-a2c9-8653e3d08a93',
            customerId: 'fe0360ed-cc5e-4137-b56b-00139d4902d0',
            movedDeliveryId: null,
            customerName: 'Анна',
            customerPhone: null,
            address: {
              city: 'Иркутск',
              street: 'Фрунзе',
              streetId: '0dffe1b2-b228-cb18-0147-30c6314145a2',
              streetClassifierId: '38000003000063000',
              index: '',
              home: '9',
              housing: '',
              apartment: '',
              entrance: '',
              floor: '',
              doorphone: '',
              comment: 'ЧАСТНЫЙ ДОМ',
              regionId: null,
              externalCartographyId: '',
            },
            restaurantId: '1b9fd757-8514-11ea-80e0-d8d385655247',
            organization: '1b9fd757-8514-11ea-80e0-d8d385655247',
            sum: 900,
            discount: 0,
            number: '7715',
            status: 'Закрыта',
            statusCode: 'CLOSED',
            deliveryCancelCause: null,
            deliveryCancelComment: null,
            courierInfo: {
              courierId: '0ff49782-f035-4e9d-8bf0-7ab563551941',
              location: {
                latitude: 52.280207,
                longitude: 104.3013128,
                accuracy: 56,
                date: '2020-11-03 13:38:43',
              },
            },
            orderLocationInfo: {
              latitude: 52.315388,
              longitude: 104.304861,
            },
            deliveryDate: '2020-11-03 13:11:00',
            actualTime: '2020-11-03 13:17:53',
            billTime: '2020-11-03 12:40:59',
            cancelTime: null,
            closeTime: '2020-11-03 13:17:56',
            confirmTime: '2020-11-03 12:11:46',
            createdTime: '2020-11-03 12:11:46',
            printTime: '2020-11-03 12:14:45',
            sendTime: '2020-11-03 12:40:59',
            comment: 'СДАЧА 1000',
            problem: null,
            operator: {
              id: 'b7c5544f-5232-454e-b9ef-0b487dcc948f',
              firstName: 'Ирина',
              middleName: 'Алексеевна',
              lastName: 'Рыцева',
              displayName: 'Рыцева ИА',
              phone: null,
              cellPhone: '89027609415',
              email: null,
              code: '2136976013',
              pinCode: '92852',
              note: null,
              mainRole: {
                id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                name: 'Администратор',
                code: '',
                paymentPerHour: 100,
                steadySalary: 20000,
                comment: '',
                scheduleType: 'BYTIME',
                externalRevision: 300397,
                deleted: false,
              },
              roles: [
                {
                  id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                  name: 'Администратор',
                  code: '',
                  paymentPerHour: 100,
                  steadySalary: 20000,
                  comment: '',
                  scheduleType: 'BYTIME',
                  externalRevision: 300397,
                  deleted: false,
                },
              ],
              deleted: false,
              externalRevision: 1419760,
            },
            conception: {
              id: '678bc8de-6dd3-4e6e-9202-054d418086a6',
              name: 'ООО Бюро Событий',
              code: 'БС',
            },
            marketingSource: null,
            durationInMinutes: 60,
            personsCount: 1,
            splitBetweenPersons: false,
            items: [
              {
                id: 'e58c6d54-346c-466b-a215-9db69eac7a6c',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859979',
                name: 'Картофель фри_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 145,
                comment: null,
                guestId: '1f8f634f-9ec4-ccc1-0175-8acccc532126',
                comboInformation: null,
              },
              {
                id: '96692a52-4b24-4435-9fe9-e04cf2b00763',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3858472',
                name: 'Паста карбонара_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 345,
                comment: null,
                guestId: '1f8f634f-9ec4-ccc1-0175-8acccc532126',
                comboInformation: null,
              },
              {
                id: '6fd1fe6d-5d4f-4919-a27f-6e8634e4c830',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859488',
                name: 'Пицца маргаритта промокод_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 0,
                comment: null,
                guestId: '1f8f634f-9ec4-ccc1-0175-8acccc532126',
                comboInformation: null,
              },
              {
                id: '2d8c54f9-f11e-4cd7-8e63-fafabe462c90',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859650',
                name: 'Хлебные палочки пармезан_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 40,
                comment: 'ЭТОТ ЗАКАЗ ОТДАЙТЕ ВМЕСТЕ С 7713.',
                guestId: '1f8f634f-9ec4-ccc1-0175-8acccc532126',
                comboInformation: null,
              },
              {
                id: 'a34ddcc2-86c6-4a8d-b2f6-5c4ef34c8a4e',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3860143',
                name: 'Крылья медово горчичные_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [
                  {
                    id: 'e6b99fd7-a4b0-4120-b41d-f303556226a9',
                    orderItemId: '00000000-0000-0000-0000-000000000000',
                    name: 'Крылья медово горчичные 9шт_',
                    amount: 1,
                    groupName: null,
                    size: null,
                    comboInformation: null,
                    sum: 0,
                    code: null,
                    category: null,
                  },
                ],
                sum: 0,
                comment: null,
                guestId: '1f8f634f-9ec4-ccc1-0175-8acccc532126',
                comboInformation: null,
              },
            ],
            guests: [
              {
                id: '1f8f634f-9ec4-ccc1-0175-8acccc532126',
                name: 'Анна',
              },
            ],
            payments: [
              {
                sum: 900,
                paymentType: {
                  id: '3a0455ab-209f-482e-ae9e-8337fd4861bb',
                  code: '',
                  name: 'Рубли',
                  comment: '',
                  combinable: false,
                  externalRevision: 464451,
                  applicableMarketingCampaigns: null,
                  deleted: false,
                },
                additionalData: null,
                isProcessedExternally: false,
                isPreliminary: false,
                isExternal: false,
                chequeAdditionalInfo: null,
                organizationDetailsInfo: null,
                isFiscalizedExternally: false,
              },
            ],
            orderType: {
              id: '76067ea3-356f-eb93-9d14-1fa00d082c4e',
              name: 'Доставка курьером',
              orderServiceType: 'DELIVERY_BY_COURIER',
              externalRevision: 1112549,
            },
            deliveryTerminal: {
              deliveryTerminalId: '14547aa8-91c0-57a4-0171-8d73dfc2dfe0',
              crmId: '1088475',
              restaurantName: 'BeHappy на партизаской',
              groupName: null,
              externalRevision: 1438269,
              technicalInformation: null,
              address: 'г. Иркутск, Партизанская улица, 28',
              protocolVersion: 1,
            },
            discounts: [],
            iikoCard5Coupon: null,
            customData: null,
            opinion: {
              organization: null,
              deliveryId: '95e9a726-ffdc-452f-a2c9-8653e3d08a93',
              comment: null,
              marks: [],
            },
            referrerId: null,
          },
          {
            customer: {
              sex: 0,
              id: 'fee60a0e-a21f-4784-a4ff-0288f875971b',
              externalId: null,
              name: 'ОКСАНА',
              surName: '',
              nick: '',
              comment: '',
              phone: '+79149566088',
              additionalPhones: [],
              addresses: [],
              cultureName: null,
              birthday: null,
              email: null,
              middleName: null,
              shouldReceivePromoActionsInfo: false,
              counteragentInfo: null,
            },
            orderId: '3a83c3df-a6c0-4a12-ab2a-6f4c45941b40',
            customerId: 'fee60a0e-a21f-4784-a4ff-0288f875971b',
            movedDeliveryId: null,
            customerName: null,
            customerPhone: null,
            address: {
              city: 'Иркутск',
              street: 'Трудовая',
              streetId: '0dffe1b2-b228-cb18-0147-30c631414582',
              streetClassifierId: '38000003000059900',
              index: '',
              home: '108Б',
              housing: '',
              apartment: '',
              entrance: '',
              floor: '',
              doorphone: '',
              comment: 'Развлекательный центр',
              regionId: null,
              externalCartographyId: '',
            },
            restaurantId: '1b9fd757-8514-11ea-80e0-d8d385655247',
            organization: '1b9fd757-8514-11ea-80e0-d8d385655247',
            sum: 2600,
            discount: 0,
            number: '7710',
            status: 'Готовится',
            statusCode: 'NEW',
            deliveryCancelCause: null,
            deliveryCancelComment: null,
            courierInfo: null,
            orderLocationInfo: {
              latitude: 52.265024,
              longitude: 104.320878,
            },
            deliveryDate: '2020-11-03 15:00:41',
            actualTime: null,
            billTime: null,
            cancelTime: null,
            closeTime: null,
            confirmTime: '2020-11-03 10:31:28',
            createdTime: '2020-11-03 10:28:41',
            printTime: '2020-11-03 10:33:01',
            sendTime: null,
            comment: '',
            problem: null,
            operator: {
              id: 'b7c5544f-5232-454e-b9ef-0b487dcc948f',
              firstName: 'Ирина',
              middleName: 'Алексеевна',
              lastName: 'Рыцева',
              displayName: 'Рыцева ИА',
              phone: null,
              cellPhone: '89027609415',
              email: null,
              code: '2136976013',
              pinCode: '92852',
              note: null,
              mainRole: {
                id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                name: 'Администратор',
                code: '',
                paymentPerHour: 100,
                steadySalary: 20000,
                comment: '',
                scheduleType: 'BYTIME',
                externalRevision: 300397,
                deleted: false,
              },
              roles: [
                {
                  id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                  name: 'Администратор',
                  code: '',
                  paymentPerHour: 100,
                  steadySalary: 20000,
                  comment: '',
                  scheduleType: 'BYTIME',
                  externalRevision: 300397,
                  deleted: false,
                },
              ],
              deleted: false,
              externalRevision: 1419760,
            },
            conception: {
              id: '678bc8de-6dd3-4e6e-9202-054d418086a6',
              name: 'ООО Бюро Событий',
              code: 'БС',
            },
            marketingSource: null,
            durationInMinutes: 60,
            personsCount: 1,
            splitBetweenPersons: false,
            items: [
              {
                id: 'f890c9c3-9423-4981-9c88-674c8c657c2a',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3858919',
                name: 'Пицца метровая 1_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 1585,
                comment: 'ПРЕДЗАКАЗ',
                guestId: '66feb046-8597-464f-9ef8-cb570a6967a5',
                comboInformation: null,
              },
              {
                id: 'e58c6d54-346c-466b-a215-9db69eac7a6c',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859979',
                name: 'Картофель фри_',
                category: null,
                amount: 7,
                size: null,
                modifiers: [],
                sum: 1015,
                comment: 'ПРЕДЗАКАЗ',
                guestId: '66feb046-8597-464f-9ef8-cb570a6967a5',
                comboInformation: null,
              },
              {
                id: '38151479-eb09-42dc-8777-72937252ba53',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859576',
                name: 'Соус айоле подарок_',
                category: null,
                amount: 2,
                size: null,
                modifiers: [],
                sum: 0,
                comment: null,
                guestId: '66feb046-8597-464f-9ef8-cb570a6967a5',
                comboInformation: null,
              },
            ],
            guests: [
              {
                id: '66feb046-8597-464f-9ef8-cb570a6967a5',
                name: 'Гость 1',
              },
            ],
            payments: [
              {
                sum: 2600,
                paymentType: {
                  id: '9d9f68c3-1a29-4e18-8b27-60310bb50e6e',
                  code: 'CARD',
                  name: 'Visa Пицца Beehappy',
                  comment: '',
                  combinable: true,
                  externalRevision: 27045,
                  applicableMarketingCampaigns: null,
                  deleted: false,
                },
                additionalData: null,
                isProcessedExternally: false,
                isPreliminary: true,
                isExternal: false,
                chequeAdditionalInfo: null,
                organizationDetailsInfo: null,
                isFiscalizedExternally: false,
              },
            ],
            orderType: {
              id: '76067ea3-356f-eb93-9d14-1fa00d082c4e',
              name: 'Доставка курьером',
              orderServiceType: 'DELIVERY_BY_COURIER',
              externalRevision: 1112549,
            },
            deliveryTerminal: {
              deliveryTerminalId: '14547aa8-91c0-57a4-0171-8d73dfc2dfe0',
              crmId: '1088475',
              restaurantName: 'BeHappy на партизаской',
              groupName: null,
              externalRevision: 1438269,
              technicalInformation: null,
              address: 'г. Иркутск, Партизанская улица, 28',
              protocolVersion: 1,
            },
            discounts: [],
            iikoCard5Coupon: null,
            customData: null,
            opinion: {
              organization: null,
              deliveryId: '3a83c3df-a6c0-4a12-ab2a-6f4c45941b40',
              comment: null,
              marks: [],
            },
            referrerId: null,
          },
          {
            customer: {
              sex: 0,
              id: '46e15f87-234c-4e89-bcac-032b059c301a',
              externalId: null,
              name: 'ДАРЬЯ',
              surName: '',
              nick: '',
              comment: '',
              phone: '+79025604530',
              additionalPhones: [],
              addresses: [],
              cultureName: null,
              birthday: null,
              email: null,
              middleName: null,
              shouldReceivePromoActionsInfo: false,
              counteragentInfo: null,
            },
            orderId: '5e299da7-329c-42f0-b9a5-8378f1a83757',
            customerId: '46e15f87-234c-4e89-bcac-032b059c301a',
            movedDeliveryId: null,
            customerName: null,
            customerPhone: null,
            address: {
              city: 'Иркутск',
              street: 'Александра Невского',
              streetId: '0dffe1b2-b228-cb18-0147-30c631414318',
              streetClassifierId: '38000003000001500',
              index: '',
              home: '58',
              housing: '',
              apartment: '137\\1',
              entrance: '3',
              floor: '14',
              doorphone: '237',
              comment: '',
              regionId: null,
              externalCartographyId: '',
            },
            restaurantId: '1b9fd757-8514-11ea-80e0-d8d385655247',
            organization: '1b9fd757-8514-11ea-80e0-d8d385655247',
            sum: 3170,
            discount: 0,
            number: '7712',
            status: 'Готовится',
            statusCode: 'NEW',
            deliveryCancelCause: null,
            deliveryCancelComment: null,
            courierInfo: null,
            orderLocationInfo: {
              latitude: 52.269383,
              longitude: 104.313179,
            },
            deliveryDate: '2020-11-03 19:00:08',
            actualTime: null,
            billTime: null,
            cancelTime: null,
            closeTime: null,
            confirmTime: '2020-11-03 10:46:08',
            createdTime: '2020-11-03 10:44:09',
            printTime: '2020-11-03 10:47:30',
            sendTime: null,
            comment: 'ЛИФТ НЕ РАБОТАЕТ',
            problem: null,
            operator: {
              id: 'b7c5544f-5232-454e-b9ef-0b487dcc948f',
              firstName: 'Ирина',
              middleName: 'Алексеевна',
              lastName: 'Рыцева',
              displayName: 'Рыцева ИА',
              phone: null,
              cellPhone: '89027609415',
              email: null,
              code: '2136976013',
              pinCode: '92852',
              note: null,
              mainRole: {
                id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                name: 'Администратор',
                code: '',
                paymentPerHour: 100,
                steadySalary: 20000,
                comment: '',
                scheduleType: 'BYTIME',
                externalRevision: 300397,
                deleted: false,
              },
              roles: [
                {
                  id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                  name: 'Администратор',
                  code: '',
                  paymentPerHour: 100,
                  steadySalary: 20000,
                  comment: '',
                  scheduleType: 'BYTIME',
                  externalRevision: 300397,
                  deleted: false,
                },
              ],
              deleted: false,
              externalRevision: 1419760,
            },
            conception: {
              id: '678bc8de-6dd3-4e6e-9202-054d418086a6',
              name: 'ООО Бюро Событий',
              code: 'БС',
            },
            marketingSource: null,
            durationInMinutes: 60,
            personsCount: 1,
            splitBetweenPersons: false,
            items: [
              {
                id: '38151479-eb09-42dc-8777-72937252ba53',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859576',
                name: 'Соус айоле подарок_',
                category: null,
                amount: 4,
                size: null,
                modifiers: [],
                sum: 0,
                comment: null,
                guestId: '1429aa3c-c40a-4268-a36c-48d51c671a5f',
                comboInformation: null,
              },
              {
                id: 'f890c9c3-9423-4981-9c88-674c8c657c2a',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3858919',
                name: 'Пицца метровая 1_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 1585,
                comment: 'ПО ВРЕМ',
                guestId: '1429aa3c-c40a-4268-a36c-48d51c671a5f',
                comboInformation: null,
              },
              {
                id: '170eb9e2-b9fc-4acb-b584-ccc6e6fe8142',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3858920',
                name: 'Пицца метровая 2_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 1585,
                comment: null,
                guestId: '1429aa3c-c40a-4268-a36c-48d51c671a5f',
                comboInformation: null,
              },
            ],
            guests: [
              {
                id: '1429aa3c-c40a-4268-a36c-48d51c671a5f',
                name: 'Гость 1',
              },
            ],
            payments: [
              {
                sum: 3170,
                paymentType: {
                  id: '9d9f68c3-1a29-4e18-8b27-60310bb50e6e',
                  code: 'CARD',
                  name: 'Visa Пицца Beehappy',
                  comment: '',
                  combinable: true,
                  externalRevision: 27045,
                  applicableMarketingCampaigns: null,
                  deleted: false,
                },
                additionalData: null,
                isProcessedExternally: false,
                isPreliminary: true,
                isExternal: false,
                chequeAdditionalInfo: null,
                organizationDetailsInfo: null,
                isFiscalizedExternally: false,
              },
            ],
            orderType: {
              id: '76067ea3-356f-eb93-9d14-1fa00d082c4e',
              name: 'Доставка курьером',
              orderServiceType: 'DELIVERY_BY_COURIER',
              externalRevision: 1112549,
            },
            deliveryTerminal: {
              deliveryTerminalId: '14547aa8-91c0-57a4-0171-8d73dfc2dfe0',
              crmId: '1088475',
              restaurantName: 'BeHappy на партизаской',
              groupName: null,
              externalRevision: 1438269,
              technicalInformation: null,
              address: 'г. Иркутск, Партизанская улица, 28',
              protocolVersion: 1,
            },
            discounts: [],
            iikoCard5Coupon: null,
            customData: null,
            opinion: {
              organization: null,
              deliveryId: '5e299da7-329c-42f0-b9a5-8378f1a83757',
              comment: null,
              marks: [],
            },
            referrerId: null,
          },
          {
            customer: {
              sex: 0,
              id: '40075f6e-dd43-4834-b8d5-066e7ba7bdd4',
              externalId: null,
              name: 'Елена',
              surName: '',
              nick: '',
              comment: '',
              phone: '+79021787880',
              additionalPhones: [],
              addresses: [],
              cultureName: null,
              birthday: null,
              email: null,
              middleName: null,
              shouldReceivePromoActionsInfo: false,
              counteragentInfo: null,
            },
            orderId: '7a62920a-6f94-453e-90ad-cdc8096e098a',
            customerId: '40075f6e-dd43-4834-b8d5-066e7ba7bdd4',
            movedDeliveryId: null,
            customerName: null,
            customerPhone: null,
            address: null,
            restaurantId: '1b9fd757-8514-11ea-80e0-d8d385655247',
            organization: '1b9fd757-8514-11ea-80e0-d8d385655247',
            sum: 3766.5,
            discount: 418.5,
            number: '7708',
            status: 'Готовится',
            statusCode: 'NEW',
            deliveryCancelCause: null,
            deliveryCancelComment: null,
            courierInfo: null,
            orderLocationInfo: null,
            deliveryDate: '2020-11-03 16:00:07',
            actualTime: null,
            billTime: null,
            cancelTime: null,
            closeTime: null,
            confirmTime: '2020-11-03 10:22:07',
            createdTime: '2020-11-03 10:18:02',
            printTime: '2020-11-03 10:22:22',
            sendTime: null,
            comment: '',
            problem: null,
            operator: {
              id: 'b7c5544f-5232-454e-b9ef-0b487dcc948f',
              firstName: 'Ирина',
              middleName: 'Алексеевна',
              lastName: 'Рыцева',
              displayName: 'Рыцева ИА',
              phone: null,
              cellPhone: '89027609415',
              email: null,
              code: '2136976013',
              pinCode: '92852',
              note: null,
              mainRole: {
                id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                name: 'Администратор',
                code: '',
                paymentPerHour: 100,
                steadySalary: 20000,
                comment: '',
                scheduleType: 'BYTIME',
                externalRevision: 300397,
                deleted: false,
              },
              roles: [
                {
                  id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                  name: 'Администратор',
                  code: '',
                  paymentPerHour: 100,
                  steadySalary: 20000,
                  comment: '',
                  scheduleType: 'BYTIME',
                  externalRevision: 300397,
                  deleted: false,
                },
              ],
              deleted: false,
              externalRevision: 1419760,
            },
            conception: {
              id: '678bc8de-6dd3-4e6e-9202-054d418086a6',
              name: 'ООО Бюро Событий',
              code: 'БС',
            },
            marketingSource: null,
            durationInMinutes: 30,
            personsCount: 1,
            splitBetweenPersons: false,
            items: [
              {
                id: 'f890c9c3-9423-4981-9c88-674c8c657c2a',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3858919',
                name: 'Пицца метровая 1_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 1585,
                comment: 'ПРЕДЗАКАЗ',
                guestId: 'abb444e2-e5fd-49bb-8dac-ff4f5874b76f',
                comboInformation: null,
              },
              {
                id: '170eb9e2-b9fc-4acb-b584-ccc6e6fe8142',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3858920',
                name: 'Пицца метровая 2_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 1585,
                comment: null,
                guestId: 'abb444e2-e5fd-49bb-8dac-ff4f5874b76f',
                comboInformation: null,
              },
              {
                id: 'e58c6d54-346c-466b-a215-9db69eac7a6c',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859979',
                name: 'Картофель фри_',
                category: null,
                amount: 7,
                size: null,
                modifiers: [],
                sum: 1015,
                comment: 'ПРЕДЗАКАЗ',
                guestId: 'abb444e2-e5fd-49bb-8dac-ff4f5874b76f',
                comboInformation: null,
              },
              {
                id: '38151479-eb09-42dc-8777-72937252ba53',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859576',
                name: 'Соус айоле подарок_',
                category: null,
                amount: 4,
                size: null,
                modifiers: [],
                sum: 0,
                comment: null,
                guestId: 'abb444e2-e5fd-49bb-8dac-ff4f5874b76f',
                comboInformation: null,
              },
              {
                id: 'fcdb0875-a1d8-48d4-8f16-762f0f09bc26',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3860895',
                name: 'Пицца пепперони 1020 промокод_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [
                  {
                    id: '6c9975df-89d3-44f0-b096-3ac16b94b971',
                    orderItemId: '00000000-0000-0000-0000-000000000000',
                    name: '-с бортом',
                    amount: 1,
                    groupName: null,
                    size: null,
                    comboInformation: null,
                    sum: 0,
                    code: null,
                    category: null,
                  },
                ],
                sum: 0,
                comment: null,
                guestId: 'abb444e2-e5fd-49bb-8dac-ff4f5874b76f',
                comboInformation: null,
              },
            ],
            guests: [
              {
                id: 'abb444e2-e5fd-49bb-8dac-ff4f5874b76f',
                name: 'Гость 1',
              },
            ],
            payments: [
              {
                sum: 4185,
                paymentType: {
                  id: '9d9f68c3-1a29-4e18-8b27-60310bb50e6e',
                  code: 'CARD',
                  name: 'Visa Пицца Beehappy',
                  comment: '',
                  combinable: true,
                  externalRevision: 27045,
                  applicableMarketingCampaigns: null,
                  deleted: false,
                },
                additionalData: null,
                isProcessedExternally: false,
                isPreliminary: true,
                isExternal: false,
                chequeAdditionalInfo: null,
                organizationDetailsInfo: null,
                isFiscalizedExternally: false,
              },
            ],
            orderType: {
              id: '5b1508f9-fe5b-d6af-cb8d-043af587d5c2',
              name: 'Самовывоз',
              orderServiceType: 'DELIVERY_PICKUP',
              externalRevision: 21,
            },
            deliveryTerminal: {
              deliveryTerminalId: '14547aa8-91c0-57a4-0171-8d73dfc2dfe0',
              crmId: '1088475',
              restaurantName: 'BeHappy на партизаской',
              groupName: null,
              externalRevision: 1438269,
              technicalInformation: null,
              address: 'г. Иркутск, Партизанская улица, 28',
              protocolVersion: 1,
            },
            discounts: [
              {
                discountCardTypeId: 'e2a81c0e-a3a0-4c0c-b868-66610ef7ac94',
                discountCardSlip: null,
                discountOrIncreaseSum: 418.5,
              },
            ],
            iikoCard5Coupon: null,
            customData: null,
            opinion: {
              organization: null,
              deliveryId: '7a62920a-6f94-453e-90ad-cdc8096e098a',
              comment: null,
              marks: [],
            },
            referrerId: null,
          },
          {
            customer: {
              sex: 0,
              id: 'c90e9856-9733-4c06-8d29-1f9ef2e69c5c',
              externalId: null,
              name: 'Иван',
              surName: null,
              nick: null,
              comment: null,
              phone: '+79041255605',
              additionalPhones: [],
              addresses: [],
              cultureName: null,
              birthday: null,
              email: null,
              middleName: null,
              shouldReceivePromoActionsInfo: true,
              counteragentInfo: null,
            },
            orderId: '92af3c14-2598-41cd-97a7-75cbfdb6f88a',
            customerId: 'c90e9856-9733-4c06-8d29-1f9ef2e69c5c',
            movedDeliveryId: null,
            customerName: 'Иван',
            customerPhone: null,
            address: {
              city: 'Иркутск',
              street: 'Ржанова',
              streetId: '0dffe1b2-b228-cb18-0147-30c631414511',
              streetClassifierId: '38000003000048800',
              index: '',
              home: '45/5',
              housing: '',
              apartment: '42',
              entrance: '',
              floor: '',
              doorphone: '',
              comment: '',
              regionId: null,
              externalCartographyId: '',
            },
            restaurantId: '1b9fd757-8514-11ea-80e0-d8d385655247',
            organization: '1b9fd757-8514-11ea-80e0-d8d385655247',
            sum: 0,
            discount: 0,
            number: '7697',
            status: 'Отменена',
            statusCode: 'CANCELLED',
            deliveryCancelCause: {
              id: '26028369-d381-32c2-8039-4de8ac137457',
              name: 'Отказ клиента',
            },
            deliveryCancelComment: 'предзаказ',
            courierInfo: null,
            orderLocationInfo: {
              latitude: 52.252731,
              longitude: 104.36229,
            },
            deliveryDate: '2020-11-03 16:00:00',
            actualTime: null,
            billTime: null,
            cancelTime: '2020-11-02 19:47:07',
            closeTime: null,
            confirmTime: null,
            createdTime: '2020-11-02 19:39:06',
            printTime: null,
            sendTime: null,
            comment: 'Позвонить, открою дверь',
            problem: null,
            operator: {
              id: 'b7c5544f-5232-454e-b9ef-0b487dcc948f',
              firstName: 'Ирина',
              middleName: 'Алексеевна',
              lastName: 'Рыцева',
              displayName: 'Рыцева ИА',
              phone: null,
              cellPhone: '89027609415',
              email: null,
              code: '2136976013',
              pinCode: '92852',
              note: null,
              mainRole: {
                id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                name: 'Администратор',
                code: '',
                paymentPerHour: 100,
                steadySalary: 20000,
                comment: '',
                scheduleType: 'BYTIME',
                externalRevision: 300397,
                deleted: false,
              },
              roles: [
                {
                  id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                  name: 'Администратор',
                  code: '',
                  paymentPerHour: 100,
                  steadySalary: 20000,
                  comment: '',
                  scheduleType: 'BYTIME',
                  externalRevision: 300397,
                  deleted: false,
                },
              ],
              deleted: false,
              externalRevision: 1419760,
            },
            conception: {
              id: '678bc8de-6dd3-4e6e-9202-054d418086a6',
              name: 'ООО Бюро Событий',
              code: 'БС',
            },
            marketingSource: null,
            durationInMinutes: 60,
            personsCount: 1,
            splitBetweenPersons: false,
            items: [],
            guests: [
              {
                id: '447672da-8f57-7b93-0175-883eb1941e47',
                name: 'Иван',
              },
            ],
            payments: [],
            orderType: {
              id: '76067ea3-356f-eb93-9d14-1fa00d082c4e',
              name: 'Доставка курьером',
              orderServiceType: 'DELIVERY_BY_COURIER',
              externalRevision: 1112549,
            },
            deliveryTerminal: {
              deliveryTerminalId: '14547aa8-91c0-57a4-0171-8d73dfc2dfe0',
              crmId: '1088475',
              restaurantName: 'BeHappy на партизаской',
              groupName: null,
              externalRevision: 1438269,
              technicalInformation: null,
              address: 'г. Иркутск, Партизанская улица, 28',
              protocolVersion: 1,
            },
            discounts: [],
            iikoCard5Coupon: null,
            customData: null,
            opinion: {
              organization: null,
              deliveryId: '92af3c14-2598-41cd-97a7-75cbfdb6f88a',
              comment: null,
              marks: [],
            },
            referrerId: null,
          },
          {
            customer: {
              sex: 0,
              id: '44620963-c8fd-4bc7-acda-265d6d58dd75',
              externalId: null,
              name: 'ИВАН',
              surName: '',
              nick: '',
              comment: '',
              phone: '+79041255605',
              additionalPhones: [],
              addresses: [],
              cultureName: null,
              birthday: null,
              email: null,
              middleName: null,
              shouldReceivePromoActionsInfo: false,
              counteragentInfo: null,
            },
            orderId: '37f832f9-8ead-46b1-a5bc-5391804a0652',
            customerId: '44620963-c8fd-4bc7-acda-265d6d58dd75',
            movedDeliveryId: null,
            customerName: null,
            customerPhone: null,
            address: {
              city: 'Иркутск',
              street: 'Ржанова',
              streetId: '0dffe1b2-b228-cb18-0147-30c631414511',
              streetClassifierId: '38000003000048800',
              index: '',
              home: '45\\5',
              housing: '',
              apartment: '42',
              entrance: '',
              floor: '',
              doorphone: '',
              comment: '',
              regionId: null,
              externalCartographyId: '',
            },
            restaurantId: '1b9fd757-8514-11ea-80e0-d8d385655247',
            organization: '1b9fd757-8514-11ea-80e0-d8d385655247',
            sum: 1585,
            discount: 0,
            number: '7711',
            status: 'Готовится',
            statusCode: 'NEW',
            deliveryCancelCause: null,
            deliveryCancelComment: null,
            courierInfo: null,
            orderLocationInfo: {
              latitude: 52.252731,
              longitude: 104.36229,
            },
            deliveryDate: '2020-11-03 16:00:14',
            actualTime: null,
            billTime: null,
            cancelTime: null,
            closeTime: null,
            confirmTime: '2020-11-03 10:40:29',
            createdTime: '2020-11-03 10:33:14',
            printTime: '2020-11-03 10:40:34',
            sendTime: null,
            comment: 'СДАЧА С 5000',
            problem: null,
            operator: {
              id: 'b7c5544f-5232-454e-b9ef-0b487dcc948f',
              firstName: 'Ирина',
              middleName: 'Алексеевна',
              lastName: 'Рыцева',
              displayName: 'Рыцева ИА',
              phone: null,
              cellPhone: '89027609415',
              email: null,
              code: '2136976013',
              pinCode: '92852',
              note: null,
              mainRole: {
                id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                name: 'Администратор',
                code: '',
                paymentPerHour: 100,
                steadySalary: 20000,
                comment: '',
                scheduleType: 'BYTIME',
                externalRevision: 300397,
                deleted: false,
              },
              roles: [
                {
                  id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                  name: 'Администратор',
                  code: '',
                  paymentPerHour: 100,
                  steadySalary: 20000,
                  comment: '',
                  scheduleType: 'BYTIME',
                  externalRevision: 300397,
                  deleted: false,
                },
              ],
              deleted: false,
              externalRevision: 1419760,
            },
            conception: {
              id: '678bc8de-6dd3-4e6e-9202-054d418086a6',
              name: 'ООО Бюро Событий',
              code: 'БС',
            },
            marketingSource: null,
            durationInMinutes: 60,
            personsCount: 1,
            splitBetweenPersons: false,
            items: [
              {
                id: '170eb9e2-b9fc-4acb-b584-ccc6e6fe8142',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3858920',
                name: 'Пицца метровая 2_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 1585,
                comment: 'ПРЕДЗАКАЗ',
                guestId: '8b7cb3d3-3f2a-4daf-a0ed-ed5241f5df15',
                comboInformation: null,
              },
              {
                id: '6fd1fe6d-5d4f-4919-a27f-6e8634e4c830',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859488',
                name: 'Пицца маргаритта промокод_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [
                  {
                    id: '6c9975df-89d3-44f0-b096-3ac16b94b971',
                    orderItemId: '00000000-0000-0000-0000-000000000000',
                    name: '-с бортом',
                    amount: 1,
                    groupName: null,
                    size: null,
                    comboInformation: null,
                    sum: 0,
                    code: null,
                    category: null,
                  },
                ],
                sum: 0,
                comment: null,
                guestId: '8b7cb3d3-3f2a-4daf-a0ed-ed5241f5df15',
                comboInformation: null,
              },
              {
                id: '38151479-eb09-42dc-8777-72937252ba53',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859576',
                name: 'Соус айоле подарок_',
                category: null,
                amount: 2,
                size: null,
                modifiers: [],
                sum: 0,
                comment: null,
                guestId: '8b7cb3d3-3f2a-4daf-a0ed-ed5241f5df15',
                comboInformation: null,
              },
              {
                id: '1761cd2e-c930-4702-8590-83223e91b567',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3860260',
                name: 'Чизкейк классический др 0р_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 0,
                comment: null,
                guestId: '8b7cb3d3-3f2a-4daf-a0ed-ed5241f5df15',
                comboInformation: null,
              },
            ],
            guests: [
              {
                id: '8b7cb3d3-3f2a-4daf-a0ed-ed5241f5df15',
                name: 'Гость 1',
              },
            ],
            payments: [],
            orderType: {
              id: '76067ea3-356f-eb93-9d14-1fa00d082c4e',
              name: 'Доставка курьером',
              orderServiceType: 'DELIVERY_BY_COURIER',
              externalRevision: 1112549,
            },
            deliveryTerminal: {
              deliveryTerminalId: '14547aa8-91c0-57a4-0171-8d73dfc2dfe0',
              crmId: '1088475',
              restaurantName: 'BeHappy на партизаской',
              groupName: null,
              externalRevision: 1438269,
              technicalInformation: null,
              address: 'г. Иркутск, Партизанская улица, 28',
              protocolVersion: 1,
            },
            discounts: [],
            iikoCard5Coupon: null,
            customData: null,
            opinion: {
              organization: null,
              deliveryId: '37f832f9-8ead-46b1-a5bc-5391804a0652',
              comment: null,
              marks: [],
            },
            referrerId: null,
          },
          {
            customer: {
              sex: 0,
              id: '60fd840c-2403-4b99-b2b6-5ad75ab03c5f',
              externalId: null,
              name: 'ИРИНА',
              surName: '',
              nick: '',
              comment: '',
              phone: '+79149382829',
              additionalPhones: [],
              addresses: [],
              cultureName: null,
              birthday: null,
              email: null,
              middleName: null,
              shouldReceivePromoActionsInfo: false,
              counteragentInfo: null,
            },
            orderId: '0ffe76ba-db40-4a2f-b338-aec9beabdb96',
            customerId: '60fd840c-2403-4b99-b2b6-5ad75ab03c5f',
            movedDeliveryId: null,
            customerName: null,
            customerPhone: null,
            address: {
              city: 'Иркутск',
              street: 'Улан-Баторская',
              streetId: '0dffe1b2-b228-cb18-0147-30c63141458e',
              streetClassifierId: '38000003000061000',
              index: '',
              home: '12',
              housing: '',
              apartment: '',
              entrance: '',
              floor: '',
              doorphone: '',
              comment: 'ОБЩЕЖИТИЕ 10',
              regionId: null,
              externalCartographyId: '',
            },
            restaurantId: '1b9fd757-8514-11ea-80e0-d8d385655247',
            organization: '1b9fd757-8514-11ea-80e0-d8d385655247',
            sum: 1320,
            discount: 0,
            number: '7714',
            status: 'Закрыта',
            statusCode: 'CLOSED',
            deliveryCancelCause: null,
            deliveryCancelComment: null,
            courierInfo: {
              courierId: '0ff49782-f035-4e9d-8bf0-7ab563551941',
              location: {
                latitude: 52.280207,
                longitude: 104.3013128,
                accuracy: 56,
                date: '2020-11-03 13:38:43',
              },
            },
            orderLocationInfo: {
              latitude: 52.25299,
              longitude: 104.250809,
            },
            deliveryDate: '2020-11-03 12:28:35',
            actualTime: '2020-11-03 12:15:22',
            billTime: '2020-11-03 11:48:49',
            cancelTime: null,
            closeTime: '2020-11-03 12:16:03',
            confirmTime: '2020-11-03 11:28:35',
            createdTime: '2020-11-03 11:24:46',
            printTime: '2020-11-03 11:29:38',
            sendTime: '2020-11-03 11:48:50',
            comment: 'БЕЗ СДАЧИ',
            problem: null,
            operator: {
              id: 'b7c5544f-5232-454e-b9ef-0b487dcc948f',
              firstName: 'Ирина',
              middleName: 'Алексеевна',
              lastName: 'Рыцева',
              displayName: 'Рыцева ИА',
              phone: null,
              cellPhone: '89027609415',
              email: null,
              code: '2136976013',
              pinCode: '92852',
              note: null,
              mainRole: {
                id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                name: 'Администратор',
                code: '',
                paymentPerHour: 100,
                steadySalary: 20000,
                comment: '',
                scheduleType: 'BYTIME',
                externalRevision: 300397,
                deleted: false,
              },
              roles: [
                {
                  id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                  name: 'Администратор',
                  code: '',
                  paymentPerHour: 100,
                  steadySalary: 20000,
                  comment: '',
                  scheduleType: 'BYTIME',
                  externalRevision: 300397,
                  deleted: false,
                },
              ],
              deleted: false,
              externalRevision: 1419760,
            },
            conception: {
              id: '678bc8de-6dd3-4e6e-9202-054d418086a6',
              name: 'ООО Бюро Событий',
              code: 'БС',
            },
            marketingSource: null,
            durationInMinutes: 60,
            personsCount: 1,
            splitBetweenPersons: false,
            items: [
              {
                id: '38151479-eb09-42dc-8777-72937252ba53',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859576',
                name: 'Соус айоле подарок_',
                category: null,
                amount: 2,
                size: null,
                modifiers: [],
                sum: 0,
                comment: null,
                guestId: 'f02d5c77-0d57-4055-9b0f-1f7906599b9a',
                comboInformation: null,
              },
              {
                id: 'b639bee0-8a91-4e7e-b672-81c229536ba8',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3858751',
                name: 'Пицца 4 сыра_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [
                  {
                    id: '6c9975df-89d3-44f0-b096-3ac16b94b971',
                    orderItemId: '00000000-0000-0000-0000-000000000000',
                    name: '-с бортом',
                    amount: 1,
                    groupName: null,
                    size: null,
                    comboInformation: null,
                    sum: 0,
                    code: null,
                    category: null,
                  },
                ],
                sum: 665,
                comment: 'НА БЛИЖ',
                guestId: 'f02d5c77-0d57-4055-9b0f-1f7906599b9a',
                comboInformation: null,
              },
              {
                id: '2d59c5e0-5752-4d81-a06e-9ec49db5ce5a',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3858904',
                name: 'Пицца пепперони двойная_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [
                  {
                    id: '6c9975df-89d3-44f0-b096-3ac16b94b971',
                    orderItemId: '00000000-0000-0000-0000-000000000000',
                    name: '-с бортом',
                    amount: 1,
                    groupName: null,
                    size: null,
                    comboInformation: null,
                    sum: 0,
                    code: null,
                    category: null,
                  },
                ],
                sum: 655,
                comment: null,
                guestId: 'f02d5c77-0d57-4055-9b0f-1f7906599b9a',
                comboInformation: null,
              },
            ],
            guests: [
              {
                id: 'f02d5c77-0d57-4055-9b0f-1f7906599b9a',
                name: 'Гость 1',
              },
            ],
            payments: [
              {
                sum: 1320,
                paymentType: {
                  id: '3a0455ab-209f-482e-ae9e-8337fd4861bb',
                  code: '',
                  name: 'Рубли',
                  comment: '',
                  combinable: false,
                  externalRevision: 464451,
                  applicableMarketingCampaigns: null,
                  deleted: false,
                },
                additionalData: null,
                isProcessedExternally: false,
                isPreliminary: false,
                isExternal: false,
                chequeAdditionalInfo: null,
                organizationDetailsInfo: null,
                isFiscalizedExternally: false,
              },
            ],
            orderType: {
              id: '76067ea3-356f-eb93-9d14-1fa00d082c4e',
              name: 'Доставка курьером',
              orderServiceType: 'DELIVERY_BY_COURIER',
              externalRevision: 1112549,
            },
            deliveryTerminal: {
              deliveryTerminalId: '14547aa8-91c0-57a4-0171-8d73dfc2dfe0',
              crmId: '1088475',
              restaurantName: 'BeHappy на партизаской',
              groupName: null,
              externalRevision: 1438269,
              technicalInformation: null,
              address: 'г. Иркутск, Партизанская улица, 28',
              protocolVersion: 1,
            },
            discounts: [],
            iikoCard5Coupon: null,
            customData: null,
            opinion: {
              organization: null,
              deliveryId: '0ffe76ba-db40-4a2f-b338-aec9beabdb96',
              comment: null,
              marks: [],
            },
            referrerId: null,
          },
          {
            customer: {
              sex: 0,
              id: '743ca501-b3ef-4b79-949b-b616a4e549b8',
              externalId: null,
              name: 'МАРИЯ',
              surName: '',
              nick: '',
              comment: '',
              phone: '+70925601788',
              additionalPhones: [],
              addresses: [],
              cultureName: null,
              birthday: null,
              email: null,
              middleName: null,
              shouldReceivePromoActionsInfo: false,
              counteragentInfo: null,
            },
            orderId: 'f5adc1d8-3eb6-46e2-af41-ff5c519aba7f',
            customerId: '743ca501-b3ef-4b79-949b-b616a4e549b8',
            movedDeliveryId: null,
            customerName: null,
            customerPhone: null,
            address: {
              city: 'Иркутск',
              street: '5 Армии',
              streetId: '1679393a-63af-52f5-0171-a3be60e37c15',
              streetClassifierId: '38000003000047300',
              index: '',
              home: '29',
              housing: '',
              apartment: '',
              entrance: '',
              floor: '',
              doorphone: '',
              comment: 'ПОЗВОНИТЬ',
              regionId: null,
              externalCartographyId: '',
            },
            restaurantId: '1b9fd757-8514-11ea-80e0-d8d385655247',
            organization: '1b9fd757-8514-11ea-80e0-d8d385655247',
            sum: 1685,
            discount: 0,
            number: '7713',
            status: 'Закрыта',
            statusCode: 'CLOSED',
            deliveryCancelCause: null,
            deliveryCancelComment: null,
            courierInfo: {
              courierId: '0ff49782-f035-4e9d-8bf0-7ab563551941',
              location: {
                latitude: 52.280207,
                longitude: 104.3013128,
                accuracy: 56,
                date: '2020-11-03 13:38:43',
              },
            },
            orderLocationInfo: {
              latitude: 52.285522,
              longitude: 104.271462,
            },
            deliveryDate: '2020-11-03 13:00:23',
            actualTime: '2020-11-03 13:00:40',
            billTime: '2020-11-03 12:41:10',
            cancelTime: null,
            closeTime: '2020-11-03 13:05:11',
            confirmTime: '2020-11-03 11:10:10',
            createdTime: '2020-11-03 11:07:23',
            printTime: '2020-11-03 11:11:18',
            sendTime: '2020-11-03 12:41:10',
            comment: 'СДАЧИ С 2000',
            problem: null,
            operator: {
              id: 'b7c5544f-5232-454e-b9ef-0b487dcc948f',
              firstName: 'Ирина',
              middleName: 'Алексеевна',
              lastName: 'Рыцева',
              displayName: 'Рыцева ИА',
              phone: null,
              cellPhone: '89027609415',
              email: null,
              code: '2136976013',
              pinCode: '92852',
              note: null,
              mainRole: {
                id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                name: 'Администратор',
                code: '',
                paymentPerHour: 100,
                steadySalary: 20000,
                comment: '',
                scheduleType: 'BYTIME',
                externalRevision: 300397,
                deleted: false,
              },
              roles: [
                {
                  id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                  name: 'Администратор',
                  code: '',
                  paymentPerHour: 100,
                  steadySalary: 20000,
                  comment: '',
                  scheduleType: 'BYTIME',
                  externalRevision: 300397,
                  deleted: false,
                },
              ],
              deleted: false,
              externalRevision: 1419760,
            },
            conception: {
              id: '678bc8de-6dd3-4e6e-9202-054d418086a6',
              name: 'ООО Бюро Событий',
              code: 'БС',
            },
            marketingSource: null,
            durationInMinutes: 60,
            personsCount: 1,
            splitBetweenPersons: false,
            items: [
              {
                id: '80fbd979-632e-45ba-b78f-bab60cc4002c',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3858921',
                name: 'Пицца метровая 3_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 1685,
                comment: 'ПО ВРЕМ',
                guestId: '0075ea36-ab38-4409-a808-1530877ca131',
                comboInformation: null,
              },
              {
                id: '38151479-eb09-42dc-8777-72937252ba53',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859576',
                name: 'Соус айоле подарок_',
                category: null,
                amount: 2,
                size: null,
                modifiers: [],
                sum: 0,
                comment: null,
                guestId: '0075ea36-ab38-4409-a808-1530877ca131',
                comboInformation: null,
              },
            ],
            guests: [
              {
                id: '0075ea36-ab38-4409-a808-1530877ca131',
                name: '5 АРМ',
              },
            ],
            payments: [
              {
                sum: 1685,
                paymentType: {
                  id: '3a0455ab-209f-482e-ae9e-8337fd4861bb',
                  code: '',
                  name: 'Рубли',
                  comment: '',
                  combinable: false,
                  externalRevision: 464451,
                  applicableMarketingCampaigns: null,
                  deleted: false,
                },
                additionalData: null,
                isProcessedExternally: false,
                isPreliminary: false,
                isExternal: false,
                chequeAdditionalInfo: null,
                organizationDetailsInfo: null,
                isFiscalizedExternally: false,
              },
            ],
            orderType: {
              id: '76067ea3-356f-eb93-9d14-1fa00d082c4e',
              name: 'Доставка курьером',
              orderServiceType: 'DELIVERY_BY_COURIER',
              externalRevision: 1112549,
            },
            deliveryTerminal: {
              deliveryTerminalId: '14547aa8-91c0-57a4-0171-8d73dfc2dfe0',
              crmId: '1088475',
              restaurantName: 'BeHappy на партизаской',
              groupName: null,
              externalRevision: 1438269,
              technicalInformation: null,
              address: 'г. Иркутск, Партизанская улица, 28',
              protocolVersion: 1,
            },
            discounts: [],
            iikoCard5Coupon: null,
            customData: null,
            opinion: {
              organization: null,
              deliveryId: 'f5adc1d8-3eb6-46e2-af41-ff5c519aba7f',
              comment: null,
              marks: [],
            },
            referrerId: null,
          },
          {
            customer: {
              sex: 0,
              id: 'd814eac1-fa2f-4338-af0b-cd878c6cf7ed',
              externalId: null,
              name: 'АНАСТАСИЯ',
              surName: '',
              nick: '',
              comment: '',
              phone: '+789148983702',
              additionalPhones: [],
              addresses: [],
              cultureName: null,
              birthday: null,
              email: null,
              middleName: null,
              shouldReceivePromoActionsInfo: false,
              counteragentInfo: null,
            },
            orderId: 'ae2d56cd-1a49-4cae-b221-fdc922158e1f',
            customerId: 'd814eac1-fa2f-4338-af0b-cd878c6cf7ed',
            movedDeliveryId: null,
            customerName: null,
            customerPhone: null,
            address: {
              city: 'Иркутск',
              street: 'Байкальская',
              streetId: '0dffe1b2-b228-cb18-0147-30c631414335',
              streetClassifierId: '38000003000004300',
              index: '',
              home: '295/2',
              housing: '',
              apartment: '',
              entrance: '',
              floor: '',
              doorphone: '',
              comment: 'ОРГАНИЗАЦИЯ КОНТРАКТ, вход с торца здания',
              regionId: null,
              externalCartographyId: '',
            },
            restaurantId: '1b9fd757-8514-11ea-80e0-d8d385655247',
            organization: '1b9fd757-8514-11ea-80e0-d8d385655247',
            sum: 1585,
            discount: 0,
            number: '7706',
            status: 'Закрыта',
            statusCode: 'CLOSED',
            deliveryCancelCause: null,
            deliveryCancelComment: null,
            courierInfo: {
              courierId: '1c8b8ddd-3b19-4168-808e-a1e41201e1ee',
              location: {
                latitude: 52.279901798,
                longitude: 104.302099133,
                accuracy: 10,
                date: '2020-11-03 13:38:54',
              },
            },
            orderLocationInfo: {
              latitude: 52.257378,
              longitude: 104.361275,
            },
            deliveryDate: '2020-11-03 12:00:09',
            actualTime: '2020-11-03 11:48:06',
            billTime: '2020-11-03 11:23:36',
            cancelTime: null,
            closeTime: '2020-11-03 11:49:12',
            confirmTime: '2020-11-03 10:16:40',
            createdTime: '2020-11-03 10:07:09',
            printTime: '2020-11-03 10:17:10',
            sendTime: '2020-11-03 11:23:41',
            comment: '',
            problem: null,
            operator: {
              id: 'b7c5544f-5232-454e-b9ef-0b487dcc948f',
              firstName: 'Ирина',
              middleName: 'Алексеевна',
              lastName: 'Рыцева',
              displayName: 'Рыцева ИА',
              phone: null,
              cellPhone: '89027609415',
              email: null,
              code: '2136976013',
              pinCode: '92852',
              note: null,
              mainRole: {
                id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                name: 'Администратор',
                code: '',
                paymentPerHour: 100,
                steadySalary: 20000,
                comment: '',
                scheduleType: 'BYTIME',
                externalRevision: 300397,
                deleted: false,
              },
              roles: [
                {
                  id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                  name: 'Администратор',
                  code: '',
                  paymentPerHour: 100,
                  steadySalary: 20000,
                  comment: '',
                  scheduleType: 'BYTIME',
                  externalRevision: 300397,
                  deleted: false,
                },
              ],
              deleted: false,
              externalRevision: 1419760,
            },
            conception: {
              id: '678bc8de-6dd3-4e6e-9202-054d418086a6',
              name: 'ООО Бюро Событий',
              code: 'БС',
            },
            marketingSource: null,
            durationInMinutes: 60,
            personsCount: 1,
            splitBetweenPersons: false,
            items: [
              {
                id: '170eb9e2-b9fc-4acb-b584-ccc6e6fe8142',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3858920',
                name: 'Пицца метровая 2_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 1585,
                comment: 'ПРЕДЗАКАЗ',
                guestId: '3f633d39-9e42-4aeb-bc65-6f83c09f9eba',
                comboInformation: null,
              },
              {
                id: '38151479-eb09-42dc-8777-72937252ba53',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859576',
                name: 'Соус айоле подарок_',
                category: null,
                amount: 2,
                size: null,
                modifiers: [],
                sum: 0,
                comment: null,
                guestId: '3f633d39-9e42-4aeb-bc65-6f83c09f9eba',
                comboInformation: null,
              },
            ],
            guests: [
              {
                id: '3f633d39-9e42-4aeb-bc65-6f83c09f9eba',
                name: 'Гость 1',
              },
            ],
            payments: [
              {
                sum: 1585,
                paymentType: {
                  id: '9d9f68c3-1a29-4e18-8b27-60310bb50e6e',
                  code: 'CARD',
                  name: 'Visa Пицца Beehappy',
                  comment: '',
                  combinable: true,
                  externalRevision: 27045,
                  applicableMarketingCampaigns: null,
                  deleted: false,
                },
                additionalData: null,
                isProcessedExternally: false,
                isPreliminary: false,
                isExternal: false,
                chequeAdditionalInfo: null,
                organizationDetailsInfo: null,
                isFiscalizedExternally: false,
              },
            ],
            orderType: {
              id: '76067ea3-356f-eb93-9d14-1fa00d082c4e',
              name: 'Доставка курьером',
              orderServiceType: 'DELIVERY_BY_COURIER',
              externalRevision: 1112549,
            },
            deliveryTerminal: {
              deliveryTerminalId: '14547aa8-91c0-57a4-0171-8d73dfc2dfe0',
              crmId: '1088475',
              restaurantName: 'BeHappy на партизаской',
              groupName: null,
              externalRevision: 1438269,
              technicalInformation: null,
              address: 'г. Иркутск, Партизанская улица, 28',
              protocolVersion: 1,
            },
            discounts: [],
            iikoCard5Coupon: null,
            customData: null,
            opinion: {
              organization: null,
              deliveryId: 'ae2d56cd-1a49-4cae-b221-fdc922158e1f',
              comment: null,
              marks: [],
            },
            referrerId: null,
          },
          {
            customer: {
              sex: 0,
              id: '27a88ec5-dd3a-415f-9656-fc8e4861c205',
              externalId: null,
              name: 'МАРГАРИТА',
              surName: '',
              nick: '',
              comment: '',
              phone: '+79501317202',
              additionalPhones: [],
              addresses: [],
              cultureName: null,
              birthday: null,
              email: null,
              middleName: null,
              shouldReceivePromoActionsInfo: false,
              counteragentInfo: null,
            },
            orderId: 'b69e3e2c-52d0-4009-a573-f01088f29d97',
            customerId: '27a88ec5-dd3a-415f-9656-fc8e4861c205',
            movedDeliveryId: null,
            customerName: null,
            customerPhone: null,
            address: {
              city: 'Иркутск',
              street: 'Радищева',
              streetId: '0dffe1b2-b228-cb18-0147-30c631414508',
              streetClassifierId: '38000003000047900',
              index: '',
              home: '5',
              housing: '',
              apartment: '',
              entrance: '',
              floor: '',
              doorphone: '',
              comment: 'ПОЛИКЛИНИКА',
              regionId: null,
              externalCartographyId: '',
            },
            restaurantId: '1b9fd757-8514-11ea-80e0-d8d385655247',
            organization: '1b9fd757-8514-11ea-80e0-d8d385655247',
            sum: 1585,
            discount: 0,
            number: '7709',
            status: 'Закрыта',
            statusCode: 'CLOSED',
            deliveryCancelCause: null,
            deliveryCancelComment: null,
            courierInfo: {
              courierId: '1c8b8ddd-3b19-4168-808e-a1e41201e1ee',
              location: {
                latitude: 52.279901798,
                longitude: 104.302099133,
                accuracy: 10,
                date: '2020-11-03 13:38:54',
              },
            },
            orderLocationInfo: {
              latitude: 52.298797,
              longitude: 104.299534,
            },
            deliveryDate: '2020-11-03 12:30:56',
            actualTime: '2020-11-03 12:27:34',
            billTime: '2020-11-03 12:10:29',
            cancelTime: null,
            closeTime: '2020-11-03 12:30:15',
            confirmTime: '2020-11-03 10:28:03',
            createdTime: '2020-11-03 10:25:56',
            printTime: '2020-11-03 10:28:27',
            sendTime: '2020-11-03 12:10:33',
            comment: '',
            problem: null,
            operator: {
              id: 'b7c5544f-5232-454e-b9ef-0b487dcc948f',
              firstName: 'Ирина',
              middleName: 'Алексеевна',
              lastName: 'Рыцева',
              displayName: 'Рыцева ИА',
              phone: null,
              cellPhone: '89027609415',
              email: null,
              code: '2136976013',
              pinCode: '92852',
              note: null,
              mainRole: {
                id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                name: 'Администратор',
                code: '',
                paymentPerHour: 100,
                steadySalary: 20000,
                comment: '',
                scheduleType: 'BYTIME',
                externalRevision: 300397,
                deleted: false,
              },
              roles: [
                {
                  id: 'bb1de21d-0bdc-e095-5aee-5ff9a9b24b5c',
                  name: 'Администратор',
                  code: '',
                  paymentPerHour: 100,
                  steadySalary: 20000,
                  comment: '',
                  scheduleType: 'BYTIME',
                  externalRevision: 300397,
                  deleted: false,
                },
              ],
              deleted: false,
              externalRevision: 1419760,
            },
            conception: {
              id: '678bc8de-6dd3-4e6e-9202-054d418086a6',
              name: 'ООО Бюро Событий',
              code: 'БС',
            },
            marketingSource: null,
            durationInMinutes: 60,
            personsCount: 1,
            splitBetweenPersons: false,
            items: [
              {
                id: 'f890c9c3-9423-4981-9c88-674c8c657c2a',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3858919',
                name: 'Пицца метровая 1_',
                category: null,
                amount: 1,
                size: null,
                modifiers: [],
                sum: 1585,
                comment: 'ПРЕДЗАКАЗ',
                guestId: '1194614c-2c1a-4be8-bba5-5e082f43ca82',
                comboInformation: null,
              },
              {
                id: '38151479-eb09-42dc-8777-72937252ba53',
                orderItemId: '00000000-0000-0000-0000-000000000000',
                code: '3859576',
                name: 'Соус айоле подарок_',
                category: null,
                amount: 2,
                size: null,
                modifiers: [],
                sum: 0,
                comment: null,
                guestId: '1194614c-2c1a-4be8-bba5-5e082f43ca82',
                comboInformation: null,
              },
            ],
            guests: [
              {
                id: '1194614c-2c1a-4be8-bba5-5e082f43ca82',
                name: 'Гость 1',
              },
            ],
            payments: [
              {
                sum: 1585,
                paymentType: {
                  id: '9d9f68c3-1a29-4e18-8b27-60310bb50e6e',
                  code: 'CARD',
                  name: 'Visa Пицца Beehappy',
                  comment: '',
                  combinable: true,
                  externalRevision: 27045,
                  applicableMarketingCampaigns: null,
                  deleted: false,
                },
                additionalData: null,
                isProcessedExternally: false,
                isPreliminary: false,
                isExternal: false,
                chequeAdditionalInfo: null,
                organizationDetailsInfo: null,
                isFiscalizedExternally: false,
              },
            ],
            orderType: {
              id: '76067ea3-356f-eb93-9d14-1fa00d082c4e',
              name: 'Доставка курьером',
              orderServiceType: 'DELIVERY_BY_COURIER',
              externalRevision: 1112549,
            },
            deliveryTerminal: {
              deliveryTerminalId: '14547aa8-91c0-57a4-0171-8d73dfc2dfe0',
              crmId: '1088475',
              restaurantName: 'BeHappy на партизаской',
              groupName: null,
              externalRevision: 1438269,
              technicalInformation: null,
              address: 'г. Иркутск, Партизанская улица, 28',
              protocolVersion: 1,
            },
            discounts: [],
            iikoCard5Coupon: null,
            customData: null,
            opinion: {
              organization: null,
              deliveryId: 'b69e3e2c-52d0-4009-a573-f01088f29d97',
              comment: null,
              marks: [],
            },
            referrerId: null,
          },
        ],
      },
      olapData: [],
      orderChecker: null,
    };
  },
  methods: {
    getPrintDelay(deliveryDate, printTime, deliveryType) {
      let diff = { hours: -1 };
      if (deliveryType === 'DELIVERY_PICKUP') diff = { minutes: -30 };
      const startCook = this.qDate.addToDate(deliveryDate, diff);
      const unit = 'minutes';

      const delay = this.qDate.getDateDiff(printTime, startCook, unit);
      if (delay > 0) return delay;
      return 0;
    },
    getCalcStartCook(deliveryDate, deliveryType) {
      let diff = { minutes: -60 };
      if (deliveryType === 'DELIVERY_PICKUP') {
        diff = { minutes: -30 };
      }
      const startCook = this.qDate.addToDate(deliveryDate, diff);
      return startCook;
    },
    getCalcFinishCook(deliveryDate, deliveryType) {
      let diff = { minutes: -30 };
      if (deliveryType === 'DELIVERY_PICKUP') {
        diff = { minutes: 0 };
      }
      const startCook = this.qDate.addToDate(deliveryDate, diff);
      return startCook;
    },
    getCookTimer(orderItem) {
      const { deliveryDate } = orderItem;
      const deliveryType = orderItem.orderType.orderServiceType;
      const startCook = this.getCalcFinishCook(deliveryDate, deliveryType);
      const unit = 'minutes';

      const delay = this.qDate.getDateDiff(startCook, this.dateTimerStart, unit);

      return delay;
    },
    getCookTimerSeconds(orderItem) {
      const { deliveryDate } = orderItem;
      const deliveryType = orderItem.orderType.orderServiceType;
      const finishCook = this.getCalcFinishCook(deliveryDate, deliveryType);
      const unit = 'seconds';

      let delay = this.qDate.getDateDiff(finishCook, this.dateTimerStart, unit);
      if (delay > 0) delay += this.timeValue;
      else delay += this.timeValue;

      return this.prettyTime(delay);
    },
    getCookDuration(deliveryDate, finishTime, printTime, deliveryType) {
      let diff = { hours: -1 };
      const printDelay = this.getPrintDelay(deliveryDate, printTime, deliveryType);
      if (deliveryType === 'DELIVERY_PICKUP') {
        diff = { minutes: -30 };
      }
      const startCook = this.qDate.addToDate(deliveryDate, diff);

      const unit = 'minutes';

      const duration = this.qDate.getDateDiff(finishTime, startCook, unit) - printDelay;

      if (duration > 0) return duration;

      return 0;
    },
    isCookLate(orderItem) {
      const { deliveryDate } = orderItem;

      const { printTime } = orderItem;
      const deliveryType = orderItem.orderType.orderServiceType;

      const findInOlap = this.olapData.find((olapItem) => olapItem.OrderNum === +orderItem.number);
      const finishTime = findInOlap['Delivery.CookingFinishTime'];
      if (this.getCookDuration(deliveryDate, finishTime, printTime, deliveryType) > 30) return true;
      return false;
    },
    getKitchenStatusName(orderItem) {
      const cookTime = this.getCookTimer(orderItem);
      if (cookTime > 30) return 'Ожидает';
      if (cookTime > 10) return 'Готовится';
      if (cookTime > 0) return 'Подгорает';
      return 'Опоздал';
    },
    getCookTimerColor(orderItem) {
      const cookTime = this.getCookTimer(orderItem);
      if (cookTime > 30) return '';
      if (cookTime > 10) return 'bg-green text-white';
      if (cookTime > 0) return 'bg-amber text-white';
      return 'bg-red text-white';
    },
    start() {
      if (!this.orderChecker) {
        this.orderChecker = setInterval(() => {
          this.getOrders();
          this.timeValue = 0;
          this.dateTimerStart = new Date();
        }, 30000);
      }
      if (!this.timer) {
        this.timer = setInterval(() => {
          this.timeValue -= 1;
        }, 1000);
      }
    },
    prettyTime(seconds) {
      let strMinus = '';
      if (seconds < 0) {
        seconds = -seconds;
        strMinus = '-';
      }
      const time = seconds / 60;
      const minutes = parseInt(time, 10);
      let secondes = Math.round((time - minutes) * 60);
      if (secondes < 10) secondes = `0${secondes}`;
      return `${strMinus}${minutes}:${secondes}`;
    },
    isNotFinishCook(item) {
      const findInOlap = this.olapData.find((olapItem) => olapItem.OrderNum === +item.number);

      if (findInOlap) return false;
      return true;
    },
    getOrders() {
      this.late = 0;
      this.during = 0;
      this.notFinish = 0;
      this.$axios.get('/api/iiko/orders')
        .then(({ data }) => {
          const orders = JSON.parse(data.answer.orders_data);
          const olapData = JSON.parse(data.answer.olap_data);

          if (orders) {
            this.allOrders.deliveryOrders.splice(0,
              this.allOrders.deliveryOrders.length, ...orders.deliveryOrders);
          }

          if (olapData) {
            this.olapData.splice(0, this.olapData.length, ...olapData);
          }
          this.allActive.forEach((item) => {
            if (this.isNotFinishCook(item)) {
              this.notFinish += 1;
            } else if (this.isCookLate(item)) {
              this.late += 1;
            } else {
              this.during += 1;
            }
          });
        })
        .catch((e) => {
          console.log('error', e);
          // this.loading = false;
          // this.alertSearch.massageType = 'error';
          // this.alertSearch.massageText =
          // 'Возникла ошибка. попробуйте уменьшить период. или проверьте корректность даты';
          // this.alertSearch.show = true;
        });
    },
  },
  computed: {
    dataPie() {
      return {
        labels: ['Во время', 'Опоздало'],
        datasets: [
          {
            data: [this.during, this.late, this.notFinish],
            backgroundColor: ['#4ef851', '#f82420', 'grey'],
          },
        ],
      };
    },
    allActive() {
      return this.allOrders.deliveryOrders.filter((item) => item.status !== 'Отменена');
    },
    allCook() {
      return this.allOrders.deliveryOrders.filter((item) => {
        const cookTime = this.getCookTimer(item);
        return cookTime < 40 && item.status === 'Готовится';
      });
    },
    now() {
      return new Date();
    },
  },
  mounted() {
    this.getOrders();
    this.start();
  },
  destroyed() {
    clearInterval(this.orderChecker);
    clearInterval(this.timer);
  },
};
</script>

<style scoped>
    body{
        overflow: hidden;
    }
    .order-card {
        margin: 10px;
        padding: 20px;
        border-radius: 10px;
        background: rgba(209, 209, 209, 0.5);
    }
</style>
